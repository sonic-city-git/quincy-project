/**
 * OPTIMIZED EXPANSION ANIMATIONS - GPU-accelerated & smooth
 * 
 * Key optimizations:
 * 1. Transform-based animations (GPU-accelerated)
 * 2. Will-change hints for better performance
 * 3. Contain: layout for isolated reflows
 * 4. Reduced motion support
 */

/* Equipment row container with performance optimizations */
.equipment-row-container {
  contain: layout; /* Isolate layout calculations */
  will-change: transform; /* Hint to GPU */
}

/* Project rows container with smooth expansion */
.project-rows-container {
  transform-origin: top;
  backface-visibility: hidden; /* GPU optimization */
  will-change: height, opacity, transform;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Smooth opacity and transform transitions */
.project-rows-container.expanding {
  animation: expandRows 0.2s ease-out forwards;
}

.project-rows-container.collapsing {
  animation: collapseRows 0.2s ease-in forwards;
}

/* GPU-accelerated animations */
@keyframes expandRows {
  from {
    opacity: 0;
    transform: translateY(-8px) scaleY(0.95);
    height: 0;
  }
  to {
    opacity: 1;
    transform: translateY(0) scaleY(1);
    height: var(--expanded-height);
  }
}

@keyframes collapseRows {
  from {
    opacity: 1;
    transform: translateY(0) scaleY(1);
    height: var(--expanded-height);
  }
  to {
    opacity: 0;
    transform: translateY(-8px) scaleY(0.95);
    height: 0;
  }
}

/* Hover optimizations */
.equipment-row-container:hover {
  transform: translateZ(0); /* Force GPU layer */
}

/* Performance-optimized expansion states */
.equipment-row-expanded {
  contain: layout style;
}

.equipment-row-collapsed {
  contain: layout;
}

/* Virtual scrolling optimizations */
.virtualized-container {
  transform: translateZ(0); /* GPU layer */
  contain: strict; /* Aggressive containment */
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .project-rows-container,
  .equipment-row-container {
    transition: none;
    animation: none;
  }
  
  .project-rows-container.expanding,
  .project-rows-container.collapsing {
    animation: none;
  }
}

/* High refresh rate optimizations */
@media (min-resolution: 120dpi) {
  .project-rows-container {
    transition-duration: 0.15s; /* Faster on high-refresh displays */
  }
}

/* Performance hints for browsers */
.equipment-timeline {
  contain: layout;
  will-change: scroll-position;
}

/* Batch expansion performance */
.batch-expanding .project-rows-container {
  transition-delay: calc(var(--expansion-index) * 0.02s); /* Staggered animations */
}

/* Memory optimizations for large lists */
.equipment-row-container:not(.visible) {
  contain: strict;
  content-visibility: auto;
}